import{b as p,c as h,u as b,r as y,F as f,d as c,e as k,f as x,Q as N,a as o,j as e,W as S}from"./index-4e7226e2.js";import{R as I}from"./Rating-aafcf36e.js";const v=()=>{const{slug:n}=p(),d=h(),{product:t,error:_,loading:w,dispatch:r,cart:i}=b();y.useEffect(()=>{l()},[]);const l=async()=>{r({type:f});try{const{data:a}=await c.get(`http://localhost:5000/api/products/${n}`);console.log(a),r({type:k,payload:a})}catch(a){r({type:x,payload:a.message}),N.error("error message")}},u=async()=>{const a=i.cartItems.find(m=>m._id===t._id),s=a?a.quantity+1:1,{data:g}=await c.get(`http://localhost:5000/api/products/product/${t._id}`);if(g.countInStock<s){window.alert("Product out of stock, ehyyaa!!!");return}r({type:"ADD_TO_CART",payload:{...t,quantity:s}}),d("/cart")};return o("section",{className:"product max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700",children:[e(S,{children:e("title",{children:t.name})}),e("img",{className:"rounded-t-lg",src:t.image,alt:t.name}),o("div",{className:"product-info",children:[e("h3",{children:t.name}),e("p",{className:"mb-3 font-normal text-gray-700 dark:text-gray-400",children:o("strong",{children:[" N",t.price]})}),e(I,{rating:t.rating,numReviews:t.numReviews}),o("div",{children:[e("p",{children:t.description}),o("pre",{children:["Status:"," ",t.countInStock>0?e("span",{className:"in-stock",children:"In stock"}):e("span",{className:"out-stock",children:"Out of stock"})]})]}),t.countInStock===0?e("button",{className:"outtaStock",disabled:!0,children:"Outta stock"}):e("button",{className:"inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:u,children:"Add to cart"})]})]},t.slug)};export{v as default};
